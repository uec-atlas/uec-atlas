id: uas:spatial
name: uec_atlas_spatial
title: "UEC Atlas Spatial and Building Ontology"

prefixes:
  uao: https://uec-atlas.e-chan1007.workers.dev/ontology/
  uar: https://uec-atlas.e-chan1007.workers.dev/resources/
  uas: https://uec-atlas.e-chan1007.workers.dev/schema/
  bot: https://w3id.org/bot#
  geo: http://www.opengis.net/ont/geosparql#
  hydra: http://www.w3.org/ns/hydra/core#
  void: http://rdfs.org/ns/void#
  schema: http://schema.org/
  linkml: https://w3id.org/linkml/
  wd: http://www.wikidata.org/entity/

imports:
  - common

default_prefix: uao

enums:
  StructureCategory:
    description: "構造物のカテゴリ"
    permissible_values:
      academic:
        description: "教育・研究系"
      sports:
        description: "運動系"
      office:
        description: "事務・管理系"
      residential:
        description: "居住系"
      welfare:
        description: "福利厚生系"
      security:
        description: "警備・防災系"
      monument:
        description: "記念碑・モニュメント系"
      parking:
        description: "駐輪・駐車場系"
      utility:
        description: "公共インフラ系"
      water:
        description: "水利系"
  StructureAmenityKey:
    description: "構造物の設備の種類"
    permissible_values:
      aed:
        description: "AED(自動体外式除細動器)"
        meaning: wd:Q787407
      wheelchair_accessible:
        description: "車椅子対応設備"
        meaning: wd:Q24192067
      ostomate:
        description: "オストメイト対応設備"
        meaning: wd:Q97657746
      nursing_bench:
        description: "介助用ベッド"
        meaning: wd:Q1780834
  StructureBoundaryType:
    description: "構造物の境界種別"
    permissible_values:
      wall:
        description: "物理境界(壁)"
      open:
        description: "開放境界(壁なし)"
  PassageCategory:
    description: "移動空間の種類"
    permissible_values:
      corridor:
        description: "廊下"
      stairs:
        description: "階段"
      elevator:
        description: "エレベーター"
  SeatType:
    description: "座席の種類"
    permissible_values:
      fixed:
        description: "固定席"
      movable:
        description: "可動席"
  SpaceUsageCategory:
    description: "部屋の使用目的"
    permissible_values:
      lecture:
        description: "講義用"
      laboratory:
        description: "実験・演習用"
      research:
        description: "研究用"
      self_study:
        description: "自習用"
      group_study:
        description: "グループ学習用"
      office:
        description: "事務用"
      lounge:
        description: "交流用"
      extra_curricular:
        description: "課外活動用"
      meeting:
        description: "会議用"
      library:
        description: "図書館用"
      museum:
        description: "展示用"
      cafeteria:
        description: "飲食用"
      storage:
        description: "倉庫用"
      utility:
        description: "設備用"
  PracticeRoomCategory:
    description: "演習室・実験室の種類"
    permissible_values:
      computer:
        description: "計算機演習室"
      science:
        description: "科学実験室"
      engineering:
        description: "工学実験室"
  FacilityCategory:
    description: "サービス設備の種類"
    permissible_values:
      cafeteria:
        description: "食堂"
      shop:
        description: "売店・コンビニエンスストア"
      library:
        description: "図書館"
      museum:
        description: "ミュージアム"
      office:
        description: "事務窓口"
  RestroomGender:
    description: "トイレの性別"
    permissible_values:
      men:
        description: "男性用"
      women:
        description: "女性用"
      unisex:
        description: "男女共用"

classes:
  SpatialEntity:
    mixins:
      - GeoFeature
    slots:
      - id
      - geometry
      - hasGeometry
      - properties
      - type
    slot_usage:
      type:
        equals_string: "Feature"

  GeometryObject:
    mixins:
      - GeoGeometry
    slots:
      - asWKT

  SpatialProperties:
    is_a: SpatialPropertiesBase
    mixins:
      - BotZone
    slots:
      - address
      - containedInPlace
      - containsPlace
      - isPartOf
      - hasPart
      - intersectsPlace
      - connectedTo
      - managedBy
      - type
    slot_usage:
      type:
        designates_type: true
        range: uriorcurie

  SiteFeature:
    is_a: SpatialEntity
    mixins:
      - SchemaPlace
    slot_usage:
      geometry: { required: false }
      properties: { range: Site }
  Site:
    is_a: SpatialProperties
    mixins:
      - SchemaPlace
    description: "キャンパス全体"

  AreaFeature:
    is_a: SpatialEntity
    mixins:
      - BotZone
    slot_usage:
      properties: { range: Area }
  Area:
    is_a: SpatialProperties
    class_uri: uao:Area
    description: "地区(東地区、西地区など)"

  StructureFeature:
    is_a: SpatialEntity
    class_uri: uao:Structure
    slot_usage:
      properties: { range: Structure }
  StructureAmenity:
    mixins:
      - SchemaLocationFeatureSpecification
    description: "構造物に付随する設備"
    attributes:
      propertyID:
        slot_uri: schema:propertyID
        range: StructureAmenityKey
        required: true
        description: "設備の種類"
      value:
        slot_uri: schema:value
        range: boolean
        required: true
        description: "設備の有無"
  Structure:
    is_a: SpatialProperties
    class_uri: uao:Structure
    description: "物理的な実体を持つ人工構造物"
    attributes:
      category:
        range: StructureCategory
        description: "構造物のカテゴリ"
      boundaryType:
        range: StructureBoundaryType
        description: "構造物の境界種別"
      amenities:
        slot_uri: schema:amenityFeature
        range: StructureAmenity
        inlined: true
        inlined_as_list: true
        multivalued: true
        description: "構造物に付随する設備"

  RoadFeature:
    is_a: StructureFeature
    class_uri: uao:Road
    slot_usage:
      properties: { range: Road }
  Road:
    is_a: Structure
    class_uri: uao:Road
    description: "キャンパス内の道路・通路"

  GateFeature:
    is_a: StructureFeature
    class_uri: uao:Gate
    slot_usage:
      properties: { range: Gate }
  Gate:
    is_a: Structure
    class_uri: uao:Gate
    mixins:
      - BotInterface
    description: "地区の入口(門)"

  BuildingFeature:
    is_a: StructureFeature
    class_uri: uao:Building
    slot_usage:
      properties: { range: Building }
  Building:
    is_a: Structure
    class_uri: uao:Building
    description: "建物全体"
    mixins:
      - BotBuilding
    attributes:
      minFloorLevel:
        range: integer
        description: "最低階(地下は負数、地上は正数)"
      maxFloorLevel:
        range: integer
        description: "最高階(正数)"

  BuildingEntranceFeature:
    is_a: SpatialEntity
    class_uri: uao:BuildingEntrance
    slot_usage:
      properties: { range: BuildingEntrance }
  BuildingEntrance:
    is_a: SpatialProperties
    class_uri: uao:BuildingEntrance
    mixins:
      - BotInterface
    description: "建物の入口"
    attributes:
      bearing:
        range: float
        description: "入口の方位角"
        required: true

  BridgeFeature:
    is_a: StructureFeature
    class_uri: uao:Bridge
    slot_usage:
      properties: { range: Bridge }
  Bridge:
    is_a: Structure
    class_uri: uao:Bridge
    description: "建物間を連絡する渡り廊下"
    slot_usage:
      connectedTo: { required: true }

  StoreyFeature:
    is_a: SpatialEntity
    class_uri: uao:Storey
    slot_usage:
      geometry:
        required: false
      properties: { range: Storey }
  Storey:
    is_a: SpatialProperties
    class_uri: uao:Storey
    description: "建物内の階層"
    mixins:
      - BotStorey
    attributes:
      floorLevel:
        slot_uri: schema:floorLevel
        range: string
        pattern: "^B?[0-9]+$"
        required: true

  RoomFeature:
    is_a: StructureFeature
    class_uri: uao:Room
    slot_usage:
      properties: { range: Room }
  Room:
    is_a: Structure
    class_uri: uao:Room
    mixins:
      - BotSpace
    description: "室内空間"
    attributes:
      usage:
        range: SpaceUsageCategory
        description: "部屋の使用目的"
      roomNumber:
        slot_uri: schema:roomNumber
        range: string
        description: "部屋番号"

  RoomSubZoneFeature:
    is_a: StructureFeature
    class_uri: uao:RoomSubZone
    slot_usage:
      properties: { range: RoomSubZone }
  RoomSubZone:
    is_a: Room
    class_uri: uao:RoomSubZone
    mixins:
      - BotSpace
    description: "室内の区画・ゾーン"
    attributes:
      usage:
        range: SpaceUsageCategory
        description: "区画・ゾーンの使用目的"

  PassageFeature:
    is_a: StructureFeature
    class_uri: uao:Passage
    slot_usage:
      properties: { range: Passage }
  Passage:
    is_a: Structure
    class_uri: uao:Passage
    description: "廊下・通路・階段・エレベーターなどの移動空間"
    attributes:
      category:
        description: "移動空間の種類"
        range: PassageCategory
        required: true

  FacilityFeature:
    is_a: StructureFeature
    class_uri: uao:Facility
    slot_usage:
      properties: { range: Facility }
  Facility:
    is_a: Structure
    class_uri: uao:Facility
    description: "サービス設備(窓口、食堂など)"
    slots:
      - openingHoursSpecification
    attributes:
      category:
        range: FacilityCategory
        required: true
        description: "サービス設備の種類"

  ClassroomFeature:
    is_a: RoomFeature
    class_uri: uao:Classroom
    slot_usage:
      properties: { range: Classroom }
  Classroom:
    is_a: Room
    class_uri: uao:Classroom
    description: "講義室"
    attributes:
      maximumAttendeeCapacity:
        slot_uri: schema:maximumAttendeeCapacity
        range: integer
        required: true
        description: "授業定員"
      maximumExamAttendeeCapacity:
        range: integer
        required: true
        description: "試験定員"
      seatType:
        range: SeatType
        required: true
        description: "座席の種類"

  PracticeRoomFeature:
    is_a: RoomFeature
    class_uri: uao:PracticeRoom
    slot_usage:
      properties: { range: PracticeRoom }
  PracticeRoom:
    is_a: Room
    class_uri: uao:PracticeRoom
    description: "演習室・実験室"
    attributes:
      category:
        range: PracticeRoomCategory
        required: true
        description: "演習室・実験室の種類"

  ResearchLaboratoryFeature:
    is_a: RoomFeature
    class_uri: uao:ResearchLaboratory
    slot_usage:
      properties: { range: ResearchLaboratory }
  ResearchLaboratory:
    is_a: Room
    class_uri: uao:ResearchLaboratory
    description: "研究室"

  RestroomFeature:
    is_a: RoomFeature
    class_uri: uao:Restroom
    slot_usage:
      properties: { range: Restroom }
  Restroom:
    is_a: Room
    mixins:
      - SchemaRestroom
    description: "トイレ"
    attributes:
      gender:
        range: RestroomGender
        description: "性別"

  FeatureCollection:
    tree_root: true
    slots:
      - type
    slot_usage:
      type:
        equals_string: "FeatureCollection"
    attributes:
      features:
        range: SpatialEntity
        multivalued: true
        inlined: true
        inlined_as_list: true

  BotInterface:
    class_uri: bot:Interface
  BotBuilding:
    class_uri: bot:Building
  BotSpace:
    class_uri: bot:Space
  BotStorey:
    class_uri: bot:Storey
  BotZone:
    class_uri: bot:Zone
  GeoGeometry:
    class_uri: geo:Geometry
  SchemaPlace:
    class_uri: schema:Place
  SchemaLocationFeatureSpecification:
    class_uri: schema:LocationFeatureSpecification
  SchemaRestroom:
    class_uri: schema:Restroom

slots:
  hasGeometry:
    slot_uri: geo:hasGeometry
    range: GeometryObject

  asWKT:
    slot_uri: geo:asWKT
    range: string

  geometry:
    range: Any

  properties:
    range: SpatialProperties
    required: true
    inlined: true
    annotations:
      jsonld_id: "@nest"

  features:
    range: SpatialEntity
    multivalued: true
    inlined: true
    inlined_as_list: true

  connectedTo:
    description: "接続する地物(渡り廊下など)"
    range: SpatialEntity
    multivalued: true
  containedInPlace:
    description: "上位地物"
    slot_uri: schema:containedInPlace
    transitive: true
    inverse: containsPlace
    domain: SpatialEntity
    range: SpatialEntity
  containsPlace:
    description: "下位地物"
    slot_uri: schema:containsPlace
    transitive: true
    domain: SpatialEntity
    range: SpatialEntity
    inverse: containedInPlace
    multivalued: true
    inlined: false
  isPartOf:
    description: "上位地物(論理的な包含関係)"
    slot_uri: schema:isPartOf
    transitive: true
    domain: SpatialEntity
    range: SpatialEntity
    inverse: hasPart
    multivalued: true
  hasPart:
    description: "下位地物(論理的な包含関係)"
    slot_uri: schema:hasPart
    transitive: true
    domain: SpatialEntity
    range: SpatialEntity
    inverse: isPartOf
    multivalued: true
    inlined: false
  intersectsPlace:
    description: "交差する地物(吹き抜けや階段の2階層目以降など)"
    slot_uri: bot:intersectsZone
    range: SpatialEntity
    multivalued: true
