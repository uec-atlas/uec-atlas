id: uats:spatial
name: uec_atlas_spatial
title: "UEC Atlas Spatial and Building Ontology"

prefixes:
  uato: https://uec-atlas.e-chan1007.workers.dev/ontology/
  uatr: https://uec-atlas.e-chan1007.workers.dev/resources/
  uats: https://uec-atlas.e-chan1007.workers.dev/schema/
  bot: https://w3id.org/bot#
  geo: http://www.opengis.net/ont/geosparql#
  hydra: http://www.w3.org/ns/hydra/core#
  void: http://rdfs.org/ns/void#
  schema: http://schema.org/
  linkml: https://w3id.org/linkml/
  wd: http://www.wikidata.org/entity/

imports:
  - common

default_prefix: uato

enums:
  StructureCategory:
    description: "構造物のカテゴリ"
    permissible_values:
      academic:
        description: "教育・研究系"
      sports:
        description: "運動系"
      office:
        description: "事務・管理系"
      residential:
        description: "居住系"
      welfare:
        description: "福利厚生系"
      security:
        description: "警備・防災系"
      monument:
        description: "記念碑・モニュメント系"
      parking:
        description: "駐輪・駐車場系"
      utility:
        description: "公共インフラ系"
      water:
        description: "水利系"
  StructureAmenityKey:
    description: "構造物の設備の種類"
    permissible_values:
      aed:
        description: "AED(自動体外式除細動器)"
        meaning: wd:Q787407
      wheelchair_accessible:
        description: "車椅子対応設備"
        meaning: wd:Q24192067
      ostomate:
        description: "オストメイト対応設備"
        meaning: wd:Q97657746
      nursing_bench:
        description: "介助用ベッド"
        meaning: wd:Q1780834
  PassageCategory:
    description: "移動空間の種類"
    permissible_values:
      corridor:
        description: "廊下"
      stairs:
        description: "階段"
      elevator:
        description: "エレベーター"

classes:
  SpatialEntity:
    class_uri: geo:Feature
    slots:
      - id
      - geometry
      - hasGeometry
      - properties
      - type
    slot_usage:
      type:
        equals_string: "Feature"

  GeometryObject:
    class_uri: geo:Geometry
    slots:
      - asWKT

  SpatialProperties:
    is_a: SpatialPropertiesBase
    class_uri: bot:Zone
    slots:
      - address
      - containedInPlace
      - containsPlace
      - isPartOf
      - hasPart
      - intersectsPlace
      - connectedTo
      - managedBy
      - type
    slot_usage:
      type:
        designates_type: true
        range: uriorcurie

  SiteFeature:
    is_a: SpatialEntity
    class_uri: schema:Place
    slot_usage:
      geometry: { required: false }
      properties: { range: Site }

  Site:
    is_a: SpatialProperties
    class_uri: schema:Place
    description: "キャンパス全体"

  AreaFeature:
    is_a: SpatialEntity
    class_uri: bot:Zone
    slot_usage:
      properties: { range: Area }

  Area:
    is_a: SpatialProperties
    class_uri: uato:Area
    description: "地区(東地区、西地区など)"

  StructureFeature:
    is_a: SpatialEntity
    class_uri: uato:Structure
    slot_usage:
      properties: { range: Structure }

  StructureAmenity:
    class_uri: schema:LocationFeatureSpecification
    description: "構造物に付随する設備"
    attributes:
      propertyID:
        slot_uri: schema:propertyID
        range: StructureAmenityKey
        required: true
        description: "設備の種類"
      value:
        slot_uri: schema:value
        range: boolean
        required: true
        description: "設備の有無"

  Structure:
    is_a: SpatialProperties
    class_uri: uato:Structure
    description: "物理的な実体を持つ人工構造物"
    attributes:
      category:
        range: StructureCategory
        description: "構造物のカテゴリ"
      amenities:
        range: StructureAmenity
        inlined: true
        inlined_as_list: true
        multivalued: true

  RoadFeature:
    is_a: StructureFeature
    class_uri: uato:Road
    slot_usage:
      properties: { range: Road }

  Road:
    is_a: Structure
    class_uri: uato:Road
    description: "キャンパス内の道路・通路"

  GateFeature:
    is_a: StructureFeature
    class_uri: uato:Gate
    slot_usage:
      properties: { range: Gate }

  Gate:
    is_a: Structure
    class_uri: uato:Gate
    mixins:
      - BotInterface
    description: "地区の入口(門)"

  BuildingFeature:
    is_a: StructureFeature
    class_uri: uato:Building
    slot_usage:
      properties: { range: Building }

  Building:
    is_a: Structure
    class_uri: uato:Building
    description: "建物全体"
    mixins:
      - BotBuilding
    attributes:
      minFloorLevel:
        range: integer
        description: "最低階(地下は負数、地上は正数)"
      maxFloorLevel:
        range: integer
        description: "最高階(正数)"

  BuildingEntranceFeature:
    is_a: SpatialEntity
    class_uri: uato:BuildingEntrance
    slot_usage:
      properties: { range: BuildingEntrance }

  BuildingEntrance:
    is_a: SpatialProperties
    class_uri: uato:BuildingEntrance
    mixins:
      - BotInterface
    description: "建物の入口"
    attributes:
      bearing:
        range: float
        description: "入口の方位角"
        required: true

  BridgeFeature:
    is_a: StructureFeature
    class_uri: uato:Bridge
    slot_usage:
      properties: { range: Bridge }

  Bridge:
    is_a: Structure
    class_uri: uato:Bridge
    description: "建物間を連絡する渡り廊下"
    slot_usage:
      connectedTo: { required: true }

  StoreyFeature:
    is_a: SpatialEntity
    class_uri: uato:Storey
    slot_usage:
      geometry:
        required: false
      properties: { range: Storey }

  Storey:
    is_a: SpatialProperties
    class_uri: uato:Storey
    description: "建物内の階層"
    mixins:
      - BotStorey
    attributes:
      floorLevel:
        slot_uri: schema:floorLevel
        range: string
        required: true

  RoomFeature:
    is_a: StructureFeature
    class_uri: uato:Room
    slot_usage:
      properties: { range: Room }

  Room:
    is_a: Structure
    class_uri: uato:Room
    mixins:
      - BotSpace
    description: "室内空間"

  PassageFeature:
    is_a: StructureFeature
    class_uri: uato:Passage
    slot_usage:
      properties: { range: Passage }

  Passage:
    is_a: Structure
    class_uri: uato:Passage
    description: "廊下・通路・階段・エレベーターなどの移動空間"
    attributes:
      category:
        slot_uri: rdf:type
        description: "移動空間の種類"
        range: PassageCategory
        required: true

  ClassroomFeature:
    is_a: RoomFeature
    class_uri: uato:Classroom
    slot_usage:
      properties: { range: Classroom }

  Classroom:
    is_a: Room
    class_uri: uato:Classroom
    description: "講義室"
    attributes:
      capacity:
        range: integer
        required: true

  RestroomFeature:
    is_a: RoomFeature
    class_uri: uato:Restroom
    slot_usage:
      properties: { range: Restroom }

  Restroom:
    is_a: Room
    class_uri: schema:Restroom
    description: "トイレ"
    attributes:
      gender:
        range: string
        description: "性別"

  FeatureCollection:
    tree_root: true
    slots:
      - type
    slot_usage:
      type:
        equals_string: "FeatureCollection"
    attributes:
      features:
        range: SpatialEntity
        multivalued: true
        inlined_as_list: true

  BotInterface:
    class_uri: bot:Interface
  BotBuilding:
    class_uri: bot:Building
  BotSpace:
    class_uri: bot:Space
  BotStorey:
    class_uri: bot:Storey

slots:
  hasGeometry:
    slot_uri: geo:hasGeometry
    range: GeometryObject

  asWKT:
    slot_uri: geo:asWKT
    range: string

  geometry:
    range: Any

  properties:
    range: SpatialProperties
    required: true
    inlined: true
    annotations:
      jsonld_id: "@nest"

  features:
    range: SpatialEntity
    multivalued: true
    inlined_as_list: true

  connectedTo:
    description: "接続する地物(渡り廊下など)"
    range: SpatialEntity
    multivalued: true
  containedInPlace:
    description: "上位地物"
    slot_uri: schema:containedInPlace
    transitive: true
    inverse: containsPlace
    domain: SpatialEntity
    range: SpatialEntity
  containsPlace:
    description: "下位地物"
    slot_uri: schema:containsPlace
    transitive: true
    domain: SpatialEntity
    range: SpatialEntity
    inverse: containedInPlace
    multivalued: true
    inlined: false
  isPartOf:
    description: "上位地物(論理的な包含関係)"
    slot_uri: schema:isPartOf
    transitive: true
    domain: SpatialEntity
    range: SpatialEntity
    inverse: hasPart
    multivalued: true
  hasPart:
    description: "下位地物(論理的な包含関係)"
    slot_uri: schema:hasPart
    transitive: true
    domain: SpatialEntity
    range: SpatialEntity
    inverse: isPartOf
    multivalued: true
    inlined: false
  intersectsPlace:
    description: "交差する地物(吹き抜けや階段の2階層目以降など)"
    slot_uri: bot:intersectsZone
    range: SpatialEntity
    multivalued: true
